# Просмотр IPTV

Предназначено для [ТВ-приставок](http://www.iconbit.ru/products/players/) на базе ОС Android версии 4.0 и выше. Совместимость с версией приложения указано в виде «(>=версия)».

## Содержание

- [Общие сведения](#общие-сведения)
- [Просмотр в встроенном плеере](#просмотр-в-встроенном-плеере)
- [Формат M3U плейлиста](#формат-m3u-плейлиста)

## Общие сведения

Предполагается, что у вас есть плейлист от вашего провайдера и подключена услуга IP-телевидения или плейлист с каналами из открытых источников. 

Чтобы добавить файл плейлиста скопируйте его на внешнее устройство хранения (USB флешка, SD карта) и подключите устройство хранения к ТВ-приставке. В результате ваш плейлист будет доступен в разделе «Плейлисты». При необходимости вы можете добавить ссылку на главную страницу приложения, для этого наведите курсор на ваш плейлист, нажмите и не отпускайте кнопку выбора не менее 3 секунд и в всплывающем меню выберите `Добавить ссылку`.

Кроме файла плейлиста вы можете добавить ссылку на самообновляемый плейлист вашего провайдера (при условии, что провайдер предоставляет прямую ссылку на файл плейлиста). Для этого откройте меню приложение по кнопке ![меню](images/menu.png) , выберите пункт ![+](images/add.png) добавить, введите ссылку в поле адреса и нажмите `Добавить`. В результате ссылка будет добавлена на главную страницу приложения в начало списка.

Плейлист должен быть в формате (M3U, XSPF, PXML) и в кодировке (UTF-8, Windows-1251 и т.д.), которые поддерживает приложение.

Рекомендуется использовать плейлист в кодировке UTF-8.

[Вернуться к содержанию](#содержание) | [Вернуться в начало раздела](#общие-сведения)

## Просмотр в встроенном плеере

### Управление

| Кнопка       | Действие                                               |
| ------------ | :----------------------------------------------------- |
| Выбор (OK)   | Открыть список телеканалов                             |
| Вверх        | Перейти к следующему каналу по списку                  |
| Вниз         | Перейти к предыдущему каналу по списку                 |
| Влево        | Перейти к предыдущему каналу                           |
| Вправо       | Запись телеканала                                      |
| 0-9          | Набор номера телеканала согласно расположению в списке |
| Назад (back) | Выйти из просмотра                                     |

### Список телеканалов

В списке телеканалов доступны следующие функции:

- ![left](images/left.png) ![right](images/right.png) - Переключение между группами телеканалов
- ![guide](images/guide.png) - Открыть телепрограмму (для текущего канала)
- ![record](images/record.png) - Запись текущего канала
- ![stretch](images/stretch.png) ![center](images/center.png)![crop](images/crop.png) - Масштабирование изображения
- ![schedule](images/schedule.png) - Открыть планировщик записи
- ![audio](images/audio.png) - Выбрать звуковую дорожку (если есть возможность)

### Телепрограмма

При выборе прошедшей или не завершенной передачи происходит переход в режим просмотра из архива  (при условии поддержки просмотра из архива для текущего телеканала).

При долгом нажатии кнопки выбора открывается окно добавления передачи в планировщик записи.

### Управление при просмотре архива

| Кнопка       | Действие (>=0.3.3)                                     | Действие (=0.3.2)                                      |
| ------------ | :----------------------------------------------------- | ------------------------------------------------------ |
| Выбор (OK)   | Открыть меню действий                                  | Открыть меню действий                                  |
| Вверх        | Перемотать на 3 минуты вперёд                          | Перейти к следующему каналу по списку                  |
| Вниз         | Перемотать на 3 минуты назад                           | Перейти к предыдущему каналу по списку                 |
| Влево        | Перемотать на 1 минуту назад                           | Перейти к предыдущему каналу                           |
| Вправо       | Перемотать на 1 минуту вперёд                          | x                                                      |
| 0-9          | Набор номера телеканала согласно расположению в списке | Набор номера телеканала согласно расположению в списке |
| Назад (back) | Выйти из просмотра архива                              | Выйти из просмотра архива                              |

#### Меню действий

Содержит следующие элементы:

- ![приостановить](images/pause.png) / ![продолжить](images/play.png) - приостановить / продолжить воспроизведение
- ![предыдущий](images/prev.png) - перейти к предыдущему видео по списку
- ![следующий](images/next.png) - перейти к следующему видео по списку
- ![audio](images/audio.png) - выбрать звуковую дорожку (если есть возможность)
- ![audio](images/select.png) - открыть телепрограмму
- время воспроизведения текущего  видео
- временная шкала воспроизведения
- продолжительность текущего  контента

[Вернуться к содержанию](#содержание) | [Вернуться в начало раздела](#просмотр-в-встроенном-плеере)

## Формат M3U плейлиста

```m3u
#EXTM3U Общие параметры
#EXTINF:-1 Параметры канала 1 ,Канал 1
адрес-канала-1
#EXTINF:-1 Параметры канала 2 ,Канал 2
адрес-канала-2

#EXTVLCOPT:http-user-agent=Monkey
#EXTINF:-1 Параметры канала 3 ,Канал 3
адрес-канала-3
```

Вставки с параметрами должны иметь вид: параметр1=значение1 параметр2=значение2 ...

Общие параметры:

- `url-tvg` - адрес архива с телепрограммой (можно несколько адресов через запятую)
- `tvg-shift` - часовой сдвиг
- `catchup-source`  (>=0.3.3) - адрес (шаблон) для просмотра архива телеканала
- `catchup-days`  (>=0.3.3) - количество дней за который доступен архив

Параметры каналов:

- `url-tvg` - адрес архива с телепрограммой (можно несколько адресов через запятую)
- `tvg-name` - имя канала в файле телепрограммы
- `tvg-id`  (>=0.3.3) - идентификатор канала в файле телепрограммы XMLTV
- `tvg-shift` - часовой сдвиг
- `tvg-logo` - адрес изображения
- `group-title` - группа телеканала
- `catchup-source`  (>=0.3.3) - адрес (шаблон) для просмотра архива телеканала
- `catchup-days`  (>=0.3.3) - количество дней за который доступен архив

[Вернуться к содержанию](#содержание) | [Вернуться в начало раздела](#формат-m3u-плейлиста)